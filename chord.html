<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Custom Spider Chart</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            padding-top: 50px;
        }

        text {
            font-family: sans-serif;
            font-size: 14px;
        }

        line {
            stroke: #4a90e2;
            stroke-width: 2;
        }

        circle {
            fill: #4a90e2;
        }
    </style>
</head>

<body>
    <svg id="chart"></svg>
    <script>
        const labels = [
            "Fire",
            "Earth",
            "Lightning",
            "Toxic",
            "Water",
            "Undead",
            "Light",
            "Air",
            "Dark"
        ];
        const connections = [
            [0, 7],
            [4, 0],
            [6, 8],
            [4, 1],
            [2, 1],
            [3, 7],
            [2, 4],
            [5, 1],
            [6, 5],
            [8, 0],
            [8, 2]
        ];
        var svg = document.getElementById("chart");
        svg.setAttribute("width", window.innerWidth * 0.9);
        svg.setAttribute("height", window.innerHeight * 0.9);
        const centerX = svg.getAttribute('width') / 2
        const centerY = svg.getAttribute('height') / 2
        var radius = 0;
        if (svg.getAttribute('width') > svg.getAttribute('height')) {
            radius = svg.getAttribute('height')
        } else if (svg.getAttribute('width') < svg.getAttribute('height')) {
            radius = svg.getAttribute('width')
        };
        radius = radius * 0.9 / 4;
        const pointCoords = [];
        // Place points around the circle
        labels.forEach((label, i) => {
            const angle = (2 * Math.PI / labels.length) * i - Math.PI / 2;
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);
            pointCoords.push({ x, y });
            // Draw point
            const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            dot.setAttribute("cx", x);
            dot.setAttribute("cy", y);
            dot.setAttribute("r", 5);
            svg.appendChild(dot);
            // Label
            var count = 0
            const labelEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
            labelEl.setAttribute("x", x);
            labelEl.setAttribute("y", y);
            labelEl.setAttribute("dy", "0.35em");
            labelEl.setAttribute("text-anchor", x < centerX ? "end" : "start");
            connections.forEach(connection => {
                if (connection.includes(i)) {
                    count++;
                };
            }); function tspanFormat(text='', weight='normal', style='normal') {
                const item = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                item.textContent = text;
                item.setAttribute("font-weight", weight);
                item.setAttribute("font-style", style);
                labelEl.appendChild(item);
            }
            const tspan = [
                [`${label}`, 1000, 'normal'],
                [`: `, 'normal', 'normal'],
                [`#${i}`, 'normal', 'italic'],
                [`, `, 'normal', 'normal'],
                [`${count} points`, 700, 'normal']
            ];
            tspan.forEach(item => {
                tspanFormat(item[0], item[1], item[2])
            });
            labelEl.style.fontSize = '2em'
            svg.appendChild(labelEl);
        });
        // Draw lines between connected points
        connections.forEach(([a, b]) => {
            const { x: x1, y: y1 } = pointCoords[a];
            const { x: x2, y: y2 } = pointCoords[b];
            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute("x1", x1);
            line.setAttribute("y1", y1);
            line.setAttribute("x2", x2);
            line.setAttribute("y2", y2);
            svg.appendChild(line);
        });
    </script>
</body>

</html>